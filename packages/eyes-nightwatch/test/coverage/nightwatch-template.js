function testFrameworkTemplate({name, skip, output, meta}) {
  const tags = []
  if (meta.features) tags.push(...meta.features.map(feature => `@${feature}`))
  if (meta.native) tags.push('@native')
  if (meta.mobile) tags.push('@mobile')
  if (meta.browser) {
    tags.push(`@${meta.browser.replace(/-[\d.]+$/, '')}`)
  }

  return `// Generated by sdk-test-kit
  ${output.hooks.deps.join('\n')}
  ${output.hooks.vars.join('\n')}
  describe${skip ? '.skip' : ''}('Coverage Tests', () => {
    before(async function(driver, done) {
      ${output.hooks.beforeEach.join('\n  ')}
      done()
    })
    after(async function(driver, done) {
      ${output.hooks.afterEach.join('\n  ')}
      done()
    })
    it('${name}${tags.length > 0 ? ` (${tags.join(' ')})` : ''}', async function(driver) {
      ${output.commands.join('\n    ')}
    })
  })`
}

module.exports = testFrameworkTemplate
